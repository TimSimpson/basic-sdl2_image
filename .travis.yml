language: cpp

clang-linux: &clang-linux
  os: linux
  dist: bionic
  python: "3.7"
  compiler: clang
  addons:
    apt:
      sources:
        - ubuntu-toolchain-r-test
        - llvm-toolchain-bionic-8
      packages:
        - clang-8
        - libstdc++-8-dev
        - python3-pip

emscripten: &emscripten
  os: linux
  dist: bionic
  python: "3.7"
  compiler: clang
  addons:
    apt:
      packages:
        - python3-pip

osx: &osx
   os: osx
   language: generic
   osx_image: xcode11.3

install:
  - git clone https://github.com/TimSimpson/ci-land.git ci
  - pushd ci && git checkout 0d0994ed9803d74a6bc0bc161e34f2d63f6c6230 && popd
  - ./ci/cpp/conan/travis/install.sh

script:
  - ./ci/cpp/conan/travis/run.sh

matrix:
  include:

    - name: "Linux Clang 8.0 Release"
      <<: *clang-linux
      env:
        - PROFILE=clang-8-r-static
    - name: "Linux Clang 8.0 Debug"
      <<: *clang-linux
      env:
        - PROFILE=clang-8-d-static
env:
  global:
    - CIL_RUN_CALL_SOURCE=true
    - CONAN_LOGIN_USERNAME=TimSimpson
    - secure: "QbTtPnhN5DqzuXiBYjOuE7GjpaA/6kHEXDieexNkFMAkIMWusXoYsp8qr4CapMlLoSEal5YuMW86YLQLAv5i2Wfv02uVfZ0lXS84rXgMqoWTYRj+IXqk1BxkoReR/kdl8rQA34m70OOi/3O5RVgnQ5XGraHltCWlTPrhM8XG78sQtZdh/p7AwNi5uo/hkAQq0jW5tOch75/aziMKF4CWN+V9H/FSTK280tqSjdgURRN5H8VoM6IIXKyblK0YXiR1l3Zy0LpHyb77B089IxPqtEWyZ9tEXkrOWqakoGOHfkQf2cKjqYrYpbtyGZAy1j18vKxBfXrFioGZN69isqONddtW8kaU79QKMeQMOLCTQs0vc9Vd5u2J9VcGYZJd74CCb0/qhNBHFOMgNKwoLpCTLZxrmpRy51GIBeCxVDKR1BKlU4qY0YaTWYyGOnxmAH+DZJOj4jxTpcfPZcSaZq9R2dytxIaP9jE6w9saJ5udM8yTt+mVhSscJrncsFNm8aleolxu30f/zuTadtHqjXtep4+H9OFV6/6uigdby/NQF5AIp0SKwsiq8PC/w0TuJ4bX6LY4l8eXR/RuHirjN5J/w1tmIBh/uuKhOTsCvfSzWZyIO38FBK4Au2ooOwkfcLfY3hmo7bXryLMPT5rxnHrQayQlnskfytkrLl2IdP7YqqI="